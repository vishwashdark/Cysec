<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Standards Hub | ISO & NIST</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            dark: '#0f172a',
                            light: '#1e293b',
                            accent: '#10b981', // Emerald green (ISO)
                            nist: '#3b82f6',   // Blue (NIST)
                            yellow: '#eab308',
                            purple: '#a855f7',
                            text: '#e2e8f0'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0b1120;
            color: #e2e8f0;
            background-image: 
                linear-gradient(rgba(16, 185, 129, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(16, 185, 129, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            transition: background-image 0.5s ease;
        }

        body.nist-mode {
            background-image: 
                linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #10b981; }
        body.nist-mode ::-webkit-scrollbar-thumb:hover { background: #3b82f6; }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .control-card {
            transition: all 0.3s ease;
        }
        .control-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.05);
        }

        /* Theme specific hovers */
        .hover-iso:hover { border-color: #10b981; box-shadow: 0 0 15px rgba(16, 185, 129, 0.2); }
        .hover-nist:hover { border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.2); }

        /* Reveal Animation */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Active Mode Button State */
        .mode-btn.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-bottom: 2px solid;
        }
        .mode-btn.active.iso { border-color: #10b981; color: #10b981; }
        .mode-btn.active.nist { border-color: #3b82f6; color: #3b82f6; }

        /* Table Styles */
        .nist-table th { background-color: rgba(59, 130, 246, 0.1); color: #3b82f6; text-align: left; padding: 10px; }
        .nist-table td { border-top: 1px solid rgba(255, 255, 255, 0.05); padding: 10px; font-size: 0.9rem; }
    </style>
</head>
<body class="antialiased overflow-x-hidden">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 glass-panel border-b border-slate-700 backdrop-blur-xl">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-4">
                    <!-- Logo -->
                    <a href="#hero" class="flex items-center">
                        <img src="3358_Tridiagonal_AI Logo Design April25_Final W.png" alt="Tridiagonal AI" class="h-8 md:h-10">
                    </a>
                </div>
                
                <!-- Mode Switcher in Nav -->
                <div class="flex bg-slate-900/50 rounded-lg p-1 border border-slate-700">
                    <button onclick="switchMode('iso')" id="navIsoBtn" class="mode-btn iso active px-4 py-1.5 rounded-md text-sm font-bold transition">ISO 27001</button>
                    <button onclick="switchMode('nist')" id="navNistBtn" class="mode-btn nist px-4 py-1.5 rounded-md text-sm font-bold transition text-slate-400 hover:text-white">NIST</button>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden lg:block">
                    <div class="ml-10 flex items-baseline space-x-1">
                        <a href="#content-area" class="hover:text-white px-3 py-2 rounded-md text-xs font-medium transition uppercase tracking-wider">Frameworks</a>
                        <a href="#search-area" class="hover:text-white px-3 py-2 rounded-md text-xs font-medium transition uppercase tracking-wider">Search</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="relative h-[85vh] flex items-center justify-center overflow-hidden pt-16 transition-colors duration-700">
        <!-- Background Decoration -->
        <div id="hero-glow" class="absolute top-0 left-1/2 w-96 h-96 bg-cyber-accent opacity-10 rounded-full blur-3xl transform -translate-x-1/2 -translate-y-1/2 transition-colors duration-700"></div>
        
        <div class="text-center z-10 px-4 reveal active">
            <img src="3358_Tridiagonal_AI Logo Design April25_Final W.png" alt="Tridiagonal AI" class="mx-auto h-20 md:h-28 mb-8">

            <div id="hero-badge" class="inline-block mb-4 px-3 py-1 border border-cyber-accent rounded-full text-cyber-accent text-xs font-mono tracking-widest uppercase bg-slate-900/50 transition-colors duration-300">
                Global Security Standards
            </div>
            
            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight mb-6">
                <span id="hero-title-main" class="text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-400">ISO 27001</span>
                <span id="hero-title-sub" class="block text-cyber-accent mt-2 transition-colors duration-300">The 93 Controls</span>
            </h1>
            <p id="hero-desc" class="mt-4 max-w-2xl mx-auto text-xl text-slate-400">
                Complete breakdown of Organizational, People, Physical, and Technological controls.
            </p>
            
            <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
                <button onclick="switchMode('iso')" class="inline-flex items-center justify-center px-8 py-3 border border-cyber-accent text-base font-medium rounded-md text-white hover:bg-cyber-accent/10 transition duration-300">
                    <i class="fa-solid fa-check-double mr-2"></i> ISO 27001
                </button>
                <button onclick="switchMode('nist')" class="inline-flex items-center justify-center px-8 py-3 border border-cyber-nist text-base font-medium rounded-md text-white hover:bg-cyber-nist/10 transition duration-300">
                    <i class="fa-solid fa-flag-usa mr-2"></i> NIST Frameworks
                </button>
            </div>
        </div>
    </section>

    <!-- Search & Filter Bar -->
    <div id="search-area" class="sticky top-16 z-40 bg-slate-900/90 backdrop-blur-md border-y border-slate-800 py-4 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-sm text-slate-400 font-mono" id="filter-label">
                Filtering ISO Controls
            </div>
            <div class="w-full md:w-1/2 relative">
                <i class="fa-solid fa-search absolute left-3 top-3 text-slate-500"></i>
                <input type="text" id="searchInput" placeholder="Search controls, families, or keywords..." 
                    class="w-full bg-slate-800 border border-slate-700 text-white rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:border-cyber-accent focus:ring-1 focus:ring-cyber-accent transition">
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div id="content-area" class="min-h-screen pb-20 pt-12">
        <!-- Dynamic Content Injected Here -->
        <div id="mainContent" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-16"></div>
        
        <!-- No Results Message -->
        <div id="noResults" class="hidden text-center py-20">
            <i class="fa-solid fa-circle-exclamation text-4xl text-slate-600 mb-4"></i>
            <p class="text-xl text-slate-500">No standards found matching your search.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-900 border-t border-slate-800 py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div>
                    <h4 class="text-cyber-accent font-bold mb-2">ISO 27001</h4>
                    <p class="text-slate-500 text-sm">International standard for Information Security Management Systems (ISMS).</p>
                </div>
                <div>
                    <h4 class="text-cyber-nist font-bold mb-2">NIST</h4>
                    <p class="text-slate-500 text-sm">National Institute of Standards and Technology frameworks for US Gov & Private Sector.</p>
                </div>
            </div>
            <div class="border-t border-slate-800 pt-8">
                <p class="text-xs text-slate-600">&copy; 2025 Security Standards Hub</p>
            </div>
        </div>
    </footer>

    <script>
        // --- DATASETS ---

        // === ISO DATA ===
        const isoThemes = [
            {
                id: "theme-org",
                title: "Organizational Controls",
                subtitle: "Theme 5 (37 Controls)",
                color: "text-cyber-accent",
                icon: "fa-sitemap",
                controls: [
                    "Policies for information security", "Information security roles", "Segregation of duties", "Management responsibilities", 
                    "Contact with authorities", "Threat intelligence", "Project management security", "Inventory of assets", "Acceptable use of assets", 
                    "Return of assets", "Classification of information", "Labelling of information", "Information transfer", "Access control", 
                    "Identity management", "Authentication information", "Access rights", "Supplier relationships", "Supplier agreements", 
                    "ICT supply chain", "Cloud services security", "Incident management planning", "Response to incidents", "Evidence collection", 
                    "Business continuity readiness", "Legal requirements", "IP rights", "Privacy and PII protection", "Independent review"
                ]
            },
            {
                id: "theme-people",
                title: "People Controls",
                subtitle: "Theme 6 (8 Controls)",
                color: "text-cyber-yellow",
                icon: "fa-users",
                controls: [
                    "Screening", "Terms of employment", "Awareness and training", "Disciplinary process", 
                    "Termination responsibilities", "Confidentiality agreements", "Remote working", "Event reporting"
                ]
            },
            {
                id: "theme-phys",
                title: "Physical Controls",
                subtitle: "Theme 7 (14 Controls)",
                color: "text-cyber-purple",
                icon: "fa-building-lock",
                controls: [
                    "Physical perimeters", "Physical entry", "Securing offices", "Monitoring", 
                    "Environmental threats", "Secure areas", "Clear desk/screen", "Equipment protection", 
                    "Off-premises assets", "Storage media", "Cabling security", "Maintenance", "Secure disposal"
                ]
            },
            {
                id: "theme-tech",
                title: "Technological Controls",
                subtitle: "Theme 8 (34 Controls)",
                color: "text-cyber-accent", // Using accent again for tech
                icon: "fa-microchip",
                controls: [
                    "Endpoint Devices", "Privileged Access", "Access Restriction", "Source Code Access", "Secure Authentication", 
                    "Capacity Management", "Malware Protection", "Vulnerability Management", "Configuration Management", "Data Masking", 
                    "DLP", "Backups", "Redundancy", "Logging", "Monitoring", "Clock Sync", "Network Security", "Web Filtering", 
                    "Cryptography", "Secure Development", "Secure Coding", "Security Testing", "Change Management"
                ]
            }
        ];

        // === NIST DATA ===
        const nistFrameworks = [
            {
                id: "nist-csf",
                title: "NIST Cybersecurity Framework (CSF)",
                subtitle: "The Gold Standard for General Security",
                icon: "fa-layer-group",
                desc: "Most widely adopted framework. Built around 5 Core Functions.",
                details: `
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-2 mt-4">
                        <div class="bg-slate-800 p-3 rounded border-t-2 border-blue-400">
                            <strong class="text-blue-400 block mb-1">1. Identify</strong>
                            <ul class="text-xs text-slate-400 list-disc pl-3 space-y-1">
                                <li>Asset Inventory</li>
                                <li>Risk Assessment</li>
                                <li>Governance</li>
                                <li>Supply Chain Risk</li>
                            </ul>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border-t-2 border-purple-400">
                            <strong class="text-purple-400 block mb-1">2. Protect</strong>
                            <ul class="text-xs text-slate-400 list-disc pl-3 space-y-1">
                                <li>IAM & Access</li>
                                <li>Awareness Training</li>
                                <li>Data Security</li>
                                <li>Maintenance</li>
                            </ul>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border-t-2 border-yellow-400">
                            <strong class="text-yellow-400 block mb-1">3. Detect</strong>
                            <ul class="text-xs text-slate-400 list-disc pl-3 space-y-1">
                                <li>Anomalies</li>
                                <li>Monitoring (SIEM)</li>
                                <li>Detection Processes</li>
                            </ul>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border-t-2 border-red-400">
                            <strong class="text-red-400 block mb-1">4. Respond</strong>
                            <ul class="text-xs text-slate-400 list-disc pl-3 space-y-1">
                                <li>Planning</li>
                                <li>Mitigation</li>
                                <li>Analysis</li>
                            </ul>
                        </div>
                        <div class="bg-slate-800 p-3 rounded border-t-2 border-green-400">
                            <strong class="text-green-400 block mb-1">5. Recover</strong>
                            <ul class="text-xs text-slate-400 list-disc pl-3 space-y-1">
                                <li>Recovery Planning</li>
                                <li>Improvements</li>
                                <li>Communication</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-4 text-sm text-slate-400">
                        <strong>Used by:</strong> Private companies, government, SaaS providers, cloud security.
                    </div>
                `
            },
            {
                id: "nist-800-53",
                title: "NIST SP 800-53 (Rev 5)",
                subtitle: "Security & Privacy Controls for IT Systems",
                icon: "fa-list-check",
                desc: "The most detailed control catalog. 20 Control Families defining what IT systems should implement.",
                details: `
                    <div class="overflow-x-auto mt-4 rounded border border-slate-700">
                        <table class="w-full nist-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Family Name</th>
                                    <th>Key Focus</th>
                                </tr>
                            </thead>
                            <tbody class="bg-slate-800/50 text-slate-300">
                                <tr><td>AC</td><td>Access Control</td><td>Auth, RBAC</td></tr>
                                <tr><td>AT</td><td>Awareness & Training</td><td>Education</td></tr>
                                <tr><td>AU</td><td>Audit & Accountability</td><td>Logging</td></tr>
                                <tr><td>CA</td><td>Assessment & Authorization</td><td>Audits</td></tr>
                                <tr><td>CM</td><td>Configuration Mgmt</td><td>Baselines</td></tr>
                                <tr><td>CP</td><td>Contingency Planning</td><td>Disaster Recovery</td></tr>
                                <tr><td>IA</td><td>ID & Authentication</td><td>MFA, Passwords</td></tr>
                                <tr><td>IR</td><td>Incident Response</td><td>Procedures</td></tr>
                                <tr><td>MA</td><td>Maintenance</td><td>Patching</td></tr>
                                <tr><td>MP</td><td>Media Protection</td><td>Drive handling</td></tr>
                                <tr><td>PE</td><td>Physical & Env</td><td>Data Centers</td></tr>
                                <tr><td>PL</td><td>Planning</td><td>Governance</td></tr>
                                <tr><td>PM</td><td>Program Mgmt</td><td>Strategy</td></tr>
                                <tr><td>PS</td><td>Personnel Security</td><td>Background checks</td></tr>
                                <tr><td>RA</td><td>Risk Assessment</td><td>Vuln Mgmt</td></tr>
                                <tr><td>SA</td><td>System Acquisition</td><td>SDLC</td></tr>
                                <tr><td>SC</td><td>System & Comms</td><td>Firewalls</td></tr>
                                <tr><td>SI</td><td>System Integrity</td><td>Anti-malware</td></tr>
                                <tr><td>SR</td><td>Supply Chain Risk</td><td>Vendors</td></tr>
                                <tr><td>PT</td><td>Privacy Controls</td><td>Data Privacy</td></tr>
                            </tbody>
                        </table>
                    </div>
                `
            },
            {
                id: "nist-800-171",
                title: "NIST SP 800-171",
                subtitle: "Protecting CUI (Controlled Unclassified Info)",
                icon: "fa-file-shield",
                desc: "Mandatory for government contractors. Contains 14 Control Families focused on confidentiality.",
                details: `
                    <ul class="list-disc pl-5 text-slate-300 space-y-1 mt-2">
                        <li>Access Control</li>
                        <li>Audit & Accountability</li>
                        <li>Incident Response</li>
                        <li>System & Comms Protection</li>
                        <li>Identification & Authentication</li>
                    </ul>
                    <p class="text-sm text-slate-400 mt-2"><em>Derived primarily from 800-53 Moderate baseline.</em></p>
                `
            },
            {
                id: "nist-800-61",
                title: "NIST SP 800-61",
                subtitle: "Computer Security Incident Handling Guide",
                icon: "fa-triangle-exclamation",
                desc: "The standard for Incident Response (IR). Covers the full lifecycle.",
                details: `
                    <div class="mt-4 grid grid-cols-2 gap-4 text-sm">
                        <div class="bg-slate-800 p-3 rounded">
                            <strong class="text-red-400 block">1. Preparation</strong>
                            <span class="text-slate-400">Tools, training, policy</span>
                        </div>
                        <div class="bg-slate-800 p-3 rounded">
                            <strong class="text-orange-400 block">2. Detection & Analysis</strong>
                            <span class="text-slate-400">Monitoring, triage</span>
                        </div>
                        <div class="bg-slate-800 p-3 rounded">
                            <strong class="text-blue-400 block">3. Containment, Eradication, Recovery</strong>
                            <span class="text-slate-400">Stopping spread, cleaning, restoring</span>
                        </div>
                        <div class="bg-slate-800 p-3 rounded">
                            <strong class="text-green-400 block">4. Post-Incident Activity</strong>
                            <span class="text-slate-400">Lessons learned, retention</span>
                        </div>
                    </div>
                `
            },
            {
                id: "nist-800-30",
                title: "NIST SP 800-30",
                subtitle: "Risk Management Guide",
                icon: "fa-chart-pie",
                desc: "Defines how IT risks should be identified and assessed.",
                details: `
                    <ul class="list-disc pl-5 text-slate-300 space-y-1 mt-2">
                        <li><strong class="text-cyber-nist">Threat Identification:</strong> Who/what attacks?</li>
                        <li><strong class="text-cyber-nist">Vulnerability Assessment:</strong> Where are we weak?</li>
                        <li><strong class="text-cyber-nist">Likelihood Scoring:</strong> Probability of attack.</li>
                        <li><strong class="text-cyber-nist">Impact Analysis:</strong> Consequence of failure.</li>
                    </ul>
                `
            },
            {
                id: "nist-800-34",
                title: "NIST SP 800-34",
                subtitle: "Contingency Planning Guide",
                icon: "fa-server",
                desc: "The standard for IT disaster recovery and business continuity.",
                details: `
                    <div class="flex flex-wrap gap-2 mt-2">
                        <span class="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-sm border border-slate-700">Backup Strategy</span>
                        <span class="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-sm border border-slate-700">Alternate Sites</span>
                        <span class="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-sm border border-slate-700">Failover</span>
                        <span class="bg-slate-800 text-slate-300 px-3 py-1 rounded-full text-sm border border-slate-700">Business Continuity</span>
                    </div>
                `
            },
            {
                id: "nist-rmf",
                title: "NIST SP 800-37 (RMF)",
                subtitle: "Risk Management Framework",
                icon: "fa-arrows-spin",
                desc: "A lifecycle model used for securing IT systems widely used in government.",
                details: `
                    <div class="flex flex-col md:flex-row justify-between items-center text-xs md:text-sm gap-2 mt-4 text-slate-400 text-center">
                        <div class="flex flex-col items-center"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center mb-1">1</div>Categorize</div>
                        <i class="fa-solid fa-arrow-right hidden md:block"></i>
                        <div class="flex flex-col items-center"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center mb-1">2</div>Select</div>
                        <i class="fa-solid fa-arrow-right hidden md:block"></i>
                        <div class="flex flex-col items-center"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center mb-1">3</div>Implement</div>
                        <i class="fa-solid fa-arrow-right hidden md:block"></i>
                        <div class="flex flex-col items-center"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center mb-1">4</div>Assess</div>
                        <i class="fa-solid fa-arrow-right hidden md:block"></i>
                        <div class="flex flex-col items-center"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center mb-1">5</div>Authorize</div>
                        <i class="fa-solid fa-arrow-right hidden md:block"></i>
                        <div class="flex flex-col items-center"><div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center mb-1">6</div>Monitor</div>
                    </div>
                `
            },
            {
                id: "nist-summary",
                title: "Why NIST Matters",
                subtitle: "Application & Business Value",
                icon: "fa-briefcase",
                desc: "Simple summary of how NIST applies to modern IT and software companies.",
                details: `
                    <div class="p-4 bg-cyber-nist/10 rounded border border-cyber-nist/30 mt-2">
                        <h5 class="text-cyber-nist font-bold mb-2">IT Security Application</h5>
                        <div class="grid grid-cols-2 gap-2 text-sm text-slate-300 mb-4">
                            <div><i class="fa-solid fa-check text-cyber-nist mr-2"></i>Build Policies</div>
                            <div><i class="fa-solid fa-check text-cyber-nist mr-2"></i>Secure Cloud</div>
                            <div><i class="fa-solid fa-check text-cyber-nist mr-2"></i>Detect Attacks</div>
                            <div><i class="fa-solid fa-check text-cyber-nist mr-2"></i>Business Continuity</div>
                        </div>
                        <h5 class="text-white font-bold mb-2">For Software Companies</h5>
                        <ul class="list-disc pl-5 text-sm text-slate-400">
                            <li>Demonstrates strong cybersecurity posture to clients.</li>
                            <li>Often required by Energy, Oil & Gas, and Gov clients.</li>
                            <li>Provides a roadmap for best-in-class security practices.</li>
                        </ul>
                    </div>
                `
            }
        ];

        // --- STATE & LOGIC ---
        let currentMode = 'iso'; // 'iso' or 'nist'
        const mainContent = document.getElementById('mainContent');
        const searchInput = document.getElementById('searchInput');
        const noResults = document.getElementById('noResults');
        const filterLabel = document.getElementById('filter-label');

        // Element References for Theme Switching
        const heroTitleMain = document.getElementById('hero-title-main');
        const heroTitleSub = document.getElementById('hero-title-sub');
        const heroDesc = document.getElementById('hero-desc');
        const heroGlow = document.getElementById('hero-glow');
        const heroBadge = document.getElementById('hero-badge');
        const navIsoBtn = document.getElementById('navIsoBtn');
        const navNistBtn = document.getElementById('navNistBtn');
        // Removed navLogoIcon reference as it is now a static image

        function switchMode(mode) {
            currentMode = mode;
            searchInput.value = ''; // Clear search
            
            if(mode === 'iso') {
                // UI Updates
                document.body.classList.remove('nist-mode');
                heroTitleMain.innerText = "ISO 27001";
                heroTitleSub.innerText = "The 93 Controls";
                heroTitleSub.classList.replace('text-cyber-nist', 'text-cyber-accent');
                heroDesc.innerText = "Complete breakdown of Organizational, People, Physical, and Technological controls.";
                heroGlow.classList.replace('bg-cyber-nist', 'bg-cyber-accent');
                heroBadge.innerText = "ISO/IEC 27001:2022 Annex A";
                heroBadge.classList.replace('text-cyber-nist', 'text-cyber-accent');
                heroBadge.classList.replace('border-cyber-nist', 'border-cyber-accent');
                // Removed logo icon class toggle
                filterLabel.innerText = "Filtering ISO Controls";
                
                // Nav Buttons
                navIsoBtn.classList.add('active', 'iso');
                navIsoBtn.classList.remove('text-slate-400');
                navNistBtn.classList.remove('active', 'nist');
                navNistBtn.classList.add('text-slate-400');

                renderISO();
            } else {
                // UI Updates
                document.body.classList.add('nist-mode');
                heroTitleMain.innerText = "NIST Frameworks";
                heroTitleSub.innerText = "CSF • 800-53 • RMF";
                heroTitleSub.classList.replace('text-cyber-accent', 'text-cyber-nist');
                heroDesc.innerText = "Comprehensive guide to US National Institute of Standards and Technology security publications.";
                heroGlow.classList.replace('bg-cyber-accent', 'bg-cyber-nist');
                heroBadge.innerText = "US Gov & Industrial Standard";
                heroBadge.classList.replace('text-cyber-accent', 'text-cyber-nist');
                heroBadge.classList.replace('border-cyber-accent', 'border-cyber-nist');
                // Removed logo icon class toggle
                filterLabel.innerText = "Filtering NIST Frameworks";

                // Nav Buttons
                navNistBtn.classList.add('active', 'nist');
                navNistBtn.classList.remove('text-slate-400');
                navIsoBtn.classList.remove('active', 'iso');
                navIsoBtn.classList.add('text-slate-400');

                renderNIST();
            }
        }

        // --- RENDER ISO ---
        function renderISO(filterText = '') {
            mainContent.innerHTML = '';
            let matchCount = 0;

            isoThemes.forEach(theme => {
                const matchingControls = theme.controls.filter(c => c.toLowerCase().includes(filterText.toLowerCase()));
                
                if (matchingControls.length > 0) {
                    matchCount += matchingControls.length;
                    const section = document.createElement('section');
                    section.className = 'reveal active';
                    
                    section.innerHTML = `
                        <div class="flex items-end mb-6 border-b border-slate-800 pb-4">
                            <div class="mr-4 p-3 rounded-lg bg-slate-800 ${theme.color}">
                                <i class="fa-solid ${theme.icon} text-2xl"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl md:text-3xl font-bold text-white">${theme.title}</h2>
                                <p class="text-slate-400 font-mono text-sm">${theme.subtitle}</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            ${matchingControls.map((ctrl, idx) => `
                                <div class="control-card glass-panel p-4 rounded-lg border border-slate-700 flex items-start space-x-4 hover-iso">
                                    <div class="flex-shrink-0 mt-1">
                                        <i class="fa-solid fa-check-circle ${theme.color} opacity-80"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-slate-200 text-sm font-semibold leading-snug">${ctrl}</h3>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    mainContent.appendChild(section);
                }
            });

            handleNoResults(matchCount);
        }

        // --- RENDER NIST ---
        function renderNIST(filterText = '') {
            mainContent.innerHTML = '';
            let matchCount = 0;
            const ft = filterText.toLowerCase();

            // Filter Logic: Search matches title, desc, or content inside details
            const matchingData = nistFrameworks.filter(item => {
                const contentStr = (item.title + item.desc + item.details).toLowerCase();
                return contentStr.includes(ft);
            });

            if (matchingData.length > 0) {
                matchCount = matchingData.length;
                
                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-1 gap-8'; // Single col stack for detailed NIST cards

                matchingData.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'glass-panel p-6 rounded-xl border-t-4 border-t-cyber-nist reveal active hover-nist';
                    
                    card.innerHTML = `
                        <div class="flex flex-col md:flex-row gap-6">
                            <div class="flex-shrink-0">
                                <div class="p-4 bg-cyber-nist/10 rounded-lg text-cyber-nist text-center w-16 h-16 flex items-center justify-center">
                                    <i class="fa-solid ${item.icon} text-2xl"></i>
                                </div>
                            </div>
                            <div class="flex-grow">
                                <div class="flex flex-col md:flex-row md:items-center justify-between mb-2">
                                    <h3 class="text-2xl font-bold text-white">${item.title}</h3>
                                    <span class="text-xs font-mono text-cyber-nist border border-cyber-nist/30 px-2 py-1 rounded mt-2 md:mt-0 w-fit">${item.subtitle}</span>
                                </div>
                                <p class="text-slate-300 mb-6">${item.desc}</p>
                                <div class="bg-slate-900/50 rounded-lg p-4 border border-slate-800">
                                    ${item.details}
                                </div>
                            </div>
                        </div>
                    `;
                    grid.appendChild(card);
                });
                mainContent.appendChild(grid);
            }

            handleNoResults(matchCount);
        }

        function handleNoResults(count) {
            if (count === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
                // Trigger animation check
                setTimeout(checkScroll, 50);
            }
        }

        // Search Listener
        searchInput.addEventListener('input', (e) => {
            if(currentMode === 'iso') renderISO(e.target.value);
            else renderNIST(e.target.value);
        });

        // Scroll Animation
        function checkScroll() {
            const reveals = document.querySelectorAll('.reveal');
            const windowHeight = window.innerHeight;
            const elementVisible = 50;

            reveals.forEach((reveal) => {
                const elementTop = reveal.getBoundingClientRect().top;
                if (elementTop < windowHeight - elementVisible) {
                    reveal.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', checkScroll);
        
        // Initial Render (ISO Default)
        renderISO();
        checkScroll();

    </script>
</body>
</html>
